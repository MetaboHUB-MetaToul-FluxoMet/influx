=======================
Change Log for influx_s
=======================

2013-10-02 version 2.6
----------------------
New features:
 - added option ``--sln`` (solution least norm) which applies 'least norm' to the whole solution vector of free parameters, not just to the increment vector (like ``--ln`` does)
 - a parallel calculation of multiple FTBLs is moved from python to R code. In such a way, some economies of repeated R starting up and library loading are made
 - when zero crossing is used (``--zc=ZC``) a third pass is added without any zc constraint.
 - added an option ``maxstep`` to control list of nlsic(). In some situations, it can make the convergence more stable at early iterations.

Bug fixes:
 - fixed a fatal error preventing from using BFGS optimization method
 - fixed an error in calculating reduced size of cumomer or EMU systems. It did not impact the results (at least for well defined network) but made calculations a little bit longer (reported by Stephane Mottelet, University of Compiegne, France).
 - a more explicit error message is generated when a given choice of free fluxes leads to a square but singular flux (stoichiometric) matrix.
 - some error messages were printed on standart output instead of ``.err`` file.

2013-06-28 version 2.5
----------------------
New features:
 - an argument of the option ``--np=NP`` (number of processes) can be fractional, between 0 and 1 in which case the number of requested cores is calculated as NP*number_of_available_cores
 - in documentation, added a section describing some problematic cases and measures which could be undertaken to solve or to work around them. Few more flield names in the output file are described (based on discussions with Yanfen Fu, University of Washington)
 - missing values in measurements (NA as Non Available) are allowed in FTBL files.

Bug fixes:
 - fixed a fatal error if the rights of generated R file cannot be changed
 - fixed a bug for ``--ln`` (least norm) option when without inequalities, increments were not of least norm (reported by Stephane Massou, INSA of Toulouse, France)
 - fixed an algorithm used in ``--ln``. Now for all inequality systems, both least residual norm and least solution norm are acheaved (before, for some systems it was not the case). **Due to this fix, we highly recomend to update to this version if you use ``--ln`` option**
 - fixed a bug in "zero crossing" inequalities. Now, inequalities involving only constrained fluxes are canceled.

2013-04-11 version 2.4
----------------------
New features:
 - number of parallel processes (in case of multiple FTBL files) is limited to a number of cores or to an argument of the ``--np`` option
 - some consistency controls were added on flux names in various FTBL sections.

Bug fixes:
 - fixed a bug in formating some error messages during FTBL parsing;
 - fixed an accidental removing of kvh.py file from the previous release;
 - fixed non signaling to check ``.err`` file while some parsing errors did produce;

2013-03-28 version 2.3
----------------------
New features:
 - external ``multicore`` R package is replaced by native ``parallel`` package;
 - convergence information of Monte-Carlo simulations is reported in the result file;
 - relative SD (rsd) in Monte-Carlo statistics is calculated as SD/abs(mean) and no more as SD/abs(estimated parameter);
 - if the number of really calculated samples in Monte-Carlo is less than 2, statistics are not calculated;
 - R code is self sufficient to be executed via source() function, even in parallel way;
 - with a new option ``--nocalc``, R code is generated but not executed.

Bug fixes:
 - fixed concurrent access to a global variable in Monte-Carlo parallel execution;
 - fixed scope issue in Monte-Carlo simulations preventing from update of the current solution;
 - fixed some redundant warning messages;
 - fixed placement of .err and .log files if FTBL(s) is (are) given with subdirectories in their names.

2013-03-15 version 2.2.1
------------------------
Bug fixes:
 - fixed a fatal error in Jacobian matrix construction when no measured fluxes are provided in FTBL file (reported by Yanfen Fu, University of Washington);
 - in the User's manual, added a naming convention for variable growth fluxes.

2013-03-13 version 2.2
----------------------
New features:
 - if more than one FTBL file is given in argument to ``influx_s``, all files are proceeded simultaneously in independent processes;
 - outliers in measurements can be automatically detected and excluded from parameter fitting.

Bug fixes:
 - fixed an error preventing Monte-Carlo results to be written if ``multicore`` package is not installed;
 - fixed a documentation error about :math:`\ln(M)` in ``mynetwork.pres.csv`` file;
 - fixed warning resuming if there are many of them;
 - fixed some error message generation on FTBL parsing.

2013-02-15 version 2.1
----------------------
New features:
 - in nlsic() a new field 'retres' is added to the list of returned values. It transfers "as is" the list returned by a last call to residual calculation function;
 - added a writing of generalized inverse of Jacobian to the result file;

Bug fix:
 - fixed a typo preventing Monte-Carlo statistics on forward-reverse fluxes to be written in the result file.

2013-02-05 version 2.0
----------------------

New features:
 - metabolite pooling is modeled. Such pooling can appear due to compartmentation phenomenon or due to isomer coelutions in chromatography. Starting from this version, metabolite concentrations can be part of fitted parameters;
 - adaptive backtracking algorithm is introduced to NLSIC algorithm;
 - history of convergence during minimization can be retrieved;
 - symbolic equations for dependent fluxes expressed as functions of free and constrained fluxes are generated by ftbl2cumoAb.py script;
 - METAB_MEASUREMENTS section is added to FTBL format;
 - added :math:`\chi^2` test for evaluating the goodness of fit;
 - removed ``metab_scale`` field from OPTIONS section in FTBL format;
 - "dead end" internal metabolites are allowed in a network without being an output metabolite. As consequence, input-output fluxes must be explicitly declared as non reversibles in the FTBL;
 - added optional EMU framework (``--emu``);
 - added optional series of starting points, fixed or randomly generated
   (``--fseries``, ``--iseries``);
 - matrix construction is reworked and fortran code is removed. Now, no more ``Rtool`` installation is required for running ``influx_s``;
 - some error messages are made more explicit and more precise;
 - outdated R package ``fUtilities`` is no more required;

Bug fixes:
 - fixed stoichiometric matrix construction when for a given metabolite;
   all fluxes are free or constrained;
 - fixed candidate propositions for free fluxes;
 - fixed standard deviation value for a ``DD/T`` field in ``PEAK_MEASUREMENTS`` section.

2011-10-11 version 1.0
----------------------

Initial release. Main features:
 - NLSIC algorithm;
 - FTBL input format from 13CFlux project;
 - reduced cumomer set for cumomer balance equations;
 - sparse matrices;
 - usage of ``multicore`` R package for Monte-Carlo simulations on Unix platform;
 - usable on platforms having Python+numpy and R+some modules;
 - command line interface;
 - brief user's and programmer's documentation;
 - OpenSource (ECL) license.
